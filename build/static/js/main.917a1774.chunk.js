(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{106:function(e,t,c){},108:function(e,t,c){"use strict";c.r(t);var a=c(6),s=c.n(a),n=c(44),i=c.n(n),r=c(17),o=(c(95),c(123)),j=c(122),d=c(63),l=c.n(d),b=c(72),h=c.n(b),u=c(64),O=c.n(u),m=(c(96),c(84)),p=c.n(m),x=c(85),f=c.n(x),v=c(23),_=c(67),g=(c(98),c(99),_.a.initializeApp({apiKey:"AIzaSyDIJSJ9g8FgPK_cgj4g6UKF-ygpNeTB8y0",authDomain:"whatsapp-clone-65b1e.firebaseapp.com",projectId:"whatsapp-clone-65b1e",storageBucket:"whatsapp-clone-65b1e.appspot.com",messagingSenderId:"1067498671329",appId:"1:1067498671329:web:fd93200e330255d8227ba0"}).firestore()),S=_.a.auth(),N=new _.a.auth.GoogleAuthProvider,y=g,w=c(65),C=c(14),E=Object(a.createContext)(),I=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(C.jsx)(E.Provider,{value:Object(a.useReducer)(t,c),children:s})},A=function(){return Object(a.useContext)(E)};var k=function(){var e,t,c=Object(v.f)().roomId,s=Object(a.useState)(""),n=Object(r.a)(s,2),i=n[0],d=n[1],b=Object(a.useState)(""),u=Object(r.a)(b,2),m=u[0],x=u[1],_=Object(a.useState)(""),g=Object(r.a)(_,2),S=g[0],N=g[1],E=Object(a.useState)([]),I=Object(r.a)(E,2),k=I[0],T=I[1],R=A(),M=Object(r.a)(R,2),P=M[0].user;return M[1],Object(a.useEffect)((function(){d(Math.floor(5e3*Math.random()))}),[]),Object(a.useEffect)((function(){c&&(y.collection("rooms").doc(c).onSnapshot((function(e){x(e.data().name)})),y.collection("rooms").doc(c).collection("message").orderBy("timestamp","asc").onSnapshot((function(e){T(e.docs.map((function(e){return e.data()})))})))}),[c]),Object(C.jsxs)("div",{className:"chat",children:[Object(C.jsxs)("div",{className:"chat__header",children:[Object(C.jsx)(o.a,{src:"https://avatars.dicebear.com/api/miniavs/human/".concat(i,".svg")}),Object(C.jsxs)("div",{className:"chat__headerInfo",children:[Object(C.jsx)("h3",{children:m}),Object(C.jsx)("p",{children:new Date(1e3*(null===(e=k[k.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.seconds)).toLocaleTimeString()})]}),Object(C.jsxs)("div",{className:"chat__headerRight",children:[Object(C.jsx)(j.a,{children:Object(C.jsx)(l.a,{})}),Object(C.jsx)(j.a,{children:Object(C.jsx)(h.a,{})}),Object(C.jsx)(j.a,{children:Object(C.jsx)(O.a,{})})]})]}),Object(C.jsx)("div",{className:"chat__body",children:k.map((function(e){var t;return Object(C.jsxs)("p",{className:"chat__message ".concat(P.displayName==e.name&&"chat__receiver"),children:[Object(C.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(C.jsx)("span",{className:"chat__time",children:new Date(1e3*(null===(t=e.timestamp)||void 0===t?void 0:t.seconds)).toLocaleTimeString()})]})}))}),Object(C.jsxs)("div",{className:"chat__footer",children:[Object(C.jsx)(p.a,{}),Object(C.jsx)(h.a,{}),Object(C.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===S)return alert("Please Enter your Message");y.collection("rooms").doc(c).collection("message").add({name:P.displayName,message:S,timestamp:w.a.firestore.FieldValue.serverTimestamp()}),N("")},children:[Object(C.jsx)("input",{type:"text",value:S,placeholder:"Type your message",onChange:function(e){return N(e.target.value)}}),Object(C.jsx)("input",{type:"submit"})]}),Object(C.jsx)(f.a,{})]})]})},T=c(86),R=c.n(T),M=c(87),P=c.n(M),B=(c(79),c(50));var D=function(e){var t,c=e.id,s=e.name,n=e.addNewChat,i=Object(a.useState)(""),j=Object(r.a)(i,2),d=j[0],l=j[1],b=Object(a.useState)(""),h=Object(r.a)(b,2),u=h[0],O=h[1];return Object(a.useEffect)((function(){l(Math.floor(5e3*Math.random())),y.collection("rooms").doc(c).collection("message").orderBy("timestamp","desc").onSnapshot((function(e){return O(e.docs.map((function(e){return e.data()})))}))}),[]),n?Object(C.jsx)("div",{className:"sidebar__chat",onClick:function(){var e=prompt("Please enter name for Chat room");e&&y.collection("rooms").add({name:e})},children:Object(C.jsx)("h2",{children:"Add New Chat"})}):Object(C.jsx)(B.b,{to:"/room/".concat(c),children:Object(C.jsxs)("div",{className:"sidebar__chat",children:[Object(C.jsx)(o.a,{src:"https://avatars.dicebear.com/api/miniavs/human/".concat(d,".svg")}),Object(C.jsxs)("div",{className:"sidebar__chatInfo",children:[Object(C.jsx)("h2",{children:s}),Object(C.jsx)("p",{children:null===(t=u[0])||void 0===t?void 0:t.message})]})]})})};var U=function(){var e=A(),t=Object(r.a)(e,2),c=t[0].user,s=(t[1],Object(a.useState)([])),n=Object(r.a)(s,2),i=n[0],d=n[1];return Object(a.useEffect)((function(){y.collection("rooms").onSnapshot((function(e){d(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(C.jsxs)("div",{className:"sidebar",children:[Object(C.jsxs)("div",{className:"sidebar__header",children:[Object(C.jsx)(o.a,{src:c.photoURL,onClick:function(e){return w.a.auth().signOut()}}),Object(C.jsxs)("div",{className:"sidebar__headerRight",children:[Object(C.jsx)(j.a,{children:Object(C.jsx)(R.a,{})}),Object(C.jsx)(j.a,{children:Object(C.jsx)(P.a,{})}),Object(C.jsx)(j.a,{children:Object(C.jsx)(O.a,{})})]})]}),Object(C.jsx)("div",{className:"sidebar__search ",children:Object(C.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(C.jsx)(l.a,{}),Object(C.jsx)("input",{type:"text",placeholder:"Search or Start a new Chat "})]})}),Object(C.jsxs)("div",{className:"sidebar__Chats",children:[Object(C.jsx)(D,{addNewChat:!0}),i.map((function(e){return Object(C.jsx)(D,{id:e.id,name:e.data.name},e.id)}))]})]})},J=c(88);c(106);var L=function(){var e=A(),t=Object(r.a)(e,2);Object(J.a)(t[0]);var c=t[1];return Object(C.jsx)("div",{className:"login__wrapper",children:Object(C.jsxs)("div",{className:"login",children:[Object(C.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1021px-WhatsApp.svg.png"}),Object(C.jsx)("h2",{children:" Sign in to WhatsApp"}),Object(C.jsx)("button",{onClick:function(){S.signInWithPopup(N).then((function(e){c({type:"SET_USER",user:e.user})})).catch((function(e){return alert(e)}))},children:"Login with Gmail"})]})})};var W=function(){var e=A(),t=Object(r.a)(e,2),c=t[0].user,s=t[1];return Object(a.useEffect)((function(){S.onAuthStateChanged((function(e){s({type:"SET_USER",user:e})}))}),[]),Object(C.jsx)("div",{className:"App",children:c?Object(C.jsx)("div",{className:"app_body",children:Object(C.jsxs)(B.a,{children:[Object(C.jsx)(U,{}),Object(C.jsxs)(v.c,{children:[Object(C.jsx)(v.a,{exact:!0,path:"/",children:Object(C.jsx)(k,{})}),Object(C.jsx)(v.a,{path:"/room/:roomId",children:Object(C.jsx)(k,{})})]})]})}):Object(C.jsx)(L,{})})},F=c(73),K=function(e,t){return"SET_USER"===t.type?Object(F.a)(Object(F.a)({},e),{},{user:t.user}):e};i.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(I,{initialState:{user:null},reducer:K,children:Object(C.jsx)(W,{})})}),document.getElementById("root"))},79:function(e,t,c){},95:function(e,t,c){},96:function(e,t,c){}},[[108,1,2]]]);
//# sourceMappingURL=main.917a1774.chunk.js.map